<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>AR Video Player</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        #info {
            position: absolute;
            top: 10px;
            width: 100%;
            text-align: center;
            z-index: 1000;
            color: white;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            font-size: 14px;
        }
        #controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            display: none;
        }
        .btn {
            background: rgba(0, 0, 0, 0.8);
            color: white;
            border: 2px solid white;
            padding: 12px 24px;
            margin: 0 5px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
        }
        .btn:active {
            background: rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body>
    <div id="info">
        <div id="status">üé• Point camera at Hiro marker</div>
        <div style="font-size: 12px; margin-top: 5px;">
            <a href="https://raw.githubusercontent.com/AR-js-org/AR.js/master/data/images/hiro.png" target="_blank" style="color: #4CAF50;">Download Hiro Marker</a>
        </div>
    </div>

    <div id="controls">
        <button class="btn" onclick="playVideo()">‚ñ∂Ô∏è Play</button>
        <button class="btn" onclick="pauseVideo()">‚è∏Ô∏è Pause</button>
        <button class="btn" onclick="restartVideo()">üîÑ Restart</button>
    </div>

    <a-scene
        embedded
        arjs="sourceType: webcam; debugUIEnabled: false;"
        vr-mode-ui="enabled: false"
        renderer="logarithmicDepthBuffer: true;">
        
        <a-assets>
            <!-- Video element - Replace with your YouTube video URL converted to MP4 -->
            <!-- Note: YouTube videos can't be embedded directly due to restrictions -->
            <!-- Use a sample video or host your own MP4 file -->
            <video 
                id="video" 
                src="https://www.youtube.com/watch?v=NVh8T70LfBE"
                preload="auto"
                loop
                crossorigin="anonymous"
                playsinline
                webkit-playsinline>
            </video>
        </a-assets>

        <a-marker preset="hiro" id="marker">
            
            <!-- Video Screen with Frame -->
            <a-plane 
                id="videoPlane"
                position="0 0.5 0" 
                rotation="0 0 0" 
                width="3" 
                height="1.7"
                material="src: #video; shader: flat; transparent: false;"
                animation="property: position; to: 0 0.6 0; dir: alternate; dur: 3000; loop: true; easing: easeInOutQuad">
            </a-plane>

            <!-- Video Frame Border -->
            <a-box 
                position="0 0.5 -0.05" 
                width="3.2" 
                height="1.9" 
                depth="0.1"
                color="#1a1a1a"
                animation="property: position; to: 0 0.6 -0.05; dir: alternate; dur: 3000; loop: true; easing: easeInOutQuad">
            </a-box>

            <!-- Decorative Lights around video -->
            <a-sphere position="-1.7 1.5 0" radius="0.1" color="#FF6B6B" 
                      animation="property: material.opacity; from: 1; to: 0.3; dir: alternate; dur: 1000; loop: true"></a-sphere>
            <a-sphere position="1.7 1.5 0" radius="0.1" color="#4ECDC4"
                      animation="property: material.opacity; from: 1; to: 0.3; dir: alternate; dur: 1000; loop: true; delay: 500"></a-sphere>
            <a-sphere position="-1.7 -0.5 0" radius="0.1" color="#95E1D3"
                      animation="property: material.opacity; from: 1; to: 0.3; dir: alternate; dur: 1000; loop: true; delay: 250"></a-sphere>
            <a-sphere position="1.7 -0.5 0" radius="0.1" color="#FECA57"
                      animation="property: material.opacity; from: 1; to: 0.3; dir: alternate; dur: 1000; loop: true; delay: 750"></a-sphere>

            <!-- Platform -->
            <a-cylinder 
                position="0 -0.5 0" 
                radius="2" 
                height="0.1" 
                color="#2C3E50"
                opacity="0.6">
            </a-cylinder>

            <!-- Title Text -->
            <a-text 
                value="NOW PLAYING" 
                align="center" 
                color="#FFFFFF"
                width="5"
                position="0 1.8 0">
            </a-text>

            <!-- Lighting -->
            <a-light type="ambient" color="#FFF" intensity="0.8"></a-light>
            <a-light type="point" intensity="1.2" position="0 2 1" color="#FFF"></a-light>
        </a-marker>

        <a-entity camera></a-entity>
    </a-scene>

    <script>
        const status = document.getElementById('status');
        const marker = document.getElementById('marker');
        const video = document.getElementById('video');
        const controls = document.getElementById('controls');
        let markerVisible = false;

        // Marker detection
        marker.addEventListener('markerFound', function() {
            status.textContent = 'üé¨ Video Playing in AR!';
            status.style.background = 'rgba(76, 175, 80, 0.8)';
            markerVisible = true;
            controls.style.display = 'block';
            
            // Auto-play video when marker is found
            video.play().catch(e => {
                console.log('Autoplay prevented, user needs to click play button');
            });
        });

        marker.addEventListener('markerLost', function() {
            status.textContent = 'üì± Point camera at Hiro marker';
            status.style.background = 'rgba(0, 0, 0, 0.7)';
            markerVisible = false;
            controls.style.display = 'none';
            video.pause();
        });

        // Video control functions
        function playVideo() {
            if (video.paused) {
                video.play().then(() => {
                    console.log('Video playing');
                }).catch(e => {
                    console.error('Play error:', e);
                });
            }
        }

        function pauseVideo() {
            if (!video.paused) {
                video.pause();
                console.log('Video paused');
            }
        }

        function restartVideo() {
            video.currentTime = 0;
            video.play().catch(e => {
                console.error('Restart error:', e);
            });
        }

        // Enable video when scene is ready
        document.querySelector('a-scene').addEventListener('loaded', function() {
            console.log('AR Scene loaded and ready');
        });
    </script>
</body>
</html>
